!function(e,r){"object"==typeof exports&&"object"==typeof module?module.exports=r():"function"==typeof define&&define.amd?define([],r):"object"==typeof exports?exports.DidomIframe=r():e.DidomIframe=r()}(self,(function(){return(()=>{"use strict";var e,r,n,t,o,i,c,d,a,s,u,l,f,p,h,m,v,y={623:()=>{class e{constructor(e,r){this.html=`\n            <div class="di-consent-overlay-text" style="width:${e}; height="${r}">\n                Viewing this video may result in cookies being placed by the vendor of the video platform to which you will be directed.\n                Given the refusal of the deposit of cookies that you have expressed, in order to respect your choice, we have blocked the playback of this video.\n                If you want to continue and play the video, you must give us your consent by clicking on the button below.\n            </div>\n            <a class="di-consent-overlay-accept-button">I accept - Launch the video</div>\n        `;let n=document.createElement("div");return n.classList.add("di-consent-overlay"),n.innerHTML+=this.html,n}}const r={yt:{id:"yt",name:"c:youtube",pattern:'iframe[src*="youtube"]',url:"youtube"},ca:{id:"ca",name:"c:calameo-RyejZgAH",pattern:'iframe[src*="calameo"]',url:"calameo"},tw:{id:"tw",name:"twitter",pattern:'iframe[src*="twitter"]',url:"twitter"}};new class{constructor(){this.cookies=r,this.initializeEvents()}initializeEvents(){let e=this;document.addEventListener("DOMNodeInserted",(function(r){var n;"IFRAME"!==r.target.nodeName||(n=e.haveToConsentAndWhich(r.target))&&e.block(n,r.target)})),document.addEventListener("DOMContentLoaded",(function(r){let n=[];for(const r in e.cookies)n.push(e.cookies[r].pattern);var t=document.querySelectorAll(n.join(","));for(let r=0;r<t.length;r++){var o=e.haveToConsentAndWhich(t[r]);o&&e.block(o,t[r])}}))}haveToConsentAndWhich(e){for(const r in this.cookies){let n=new RegExp(this.cookies[r].url);if(n.test(e.src),n.test(e.src))return this.cookies[r]}return!1}block(r,n){console.log("block "+r.id);let t=n.cloneNode();t.src="",t.dataset.src=n.src;var o=new e(200,300);let i=document.createElement("div");i.classList.add("di-container","di-container-"+r.id),i.append(o,t),n.after(i),n.remove(),window.didomiOnReady=window.didomiOnReady||[],window.didomiOnReady.push((function(e){e.getObservableOnUserConsentStatusForVendor(r.name).subscribe((function(e){if(!0===e){let r=i.querySelector("iframe[data-src]");e=r.getAttribute("data-src"),r.setAttribute("src",e),i.querySelector(".di-consent-overlay").style.display="none"}}))})),i.querySelectorAll(".di-consent-overlay-accept-button").forEach((function(e){e.addEventListener("click",(function(){var e=Didomi.getVendorById(r.name).purposeIds,n=Didomi.openTransaction();n.enableVendor(r.name),n.enablePurposes(...e),n.commit()}))}))}}}},b={};function g(e){var r=b[e];if(void 0!==r){if(void 0!==r.error)throw r.error;return r.exports}r=b[e]={exports:{}};try{var n={id:e,module:r,factory:y[e],require:g};g.i.forEach((function(e){e(n)})),r=n.module,n.factory.call(r.exports,r,r.exports,n.require)}catch(e){throw r.error=e}return r.exports}function w(e){u=e;for(var r=[],n=0;n<s.length;n++)r[n]=s[n].call(null,e);return Promise.all(r)}function E(e){if(0===t.length)return e();var r=t;return t=[],Promise.all(r).then((function(){return E(e)}))}function I(e){if("idle"!==u)throw new Error("check() is only allowed in idle status");return w("check").then(g.hmrM).then((function(r){return r?w("prepare").then((function(){var n=[];return t=[],o=[],Promise.all(Object.keys(g.hmrC).reduce((function(e,t){return g.hmrC[t](r.c,r.r,r.m,e,o,n),e}),[])).then((function(){return E((function(){return e?k(e):w("ready").then((function(){return n}))}))}))})):w(D()?"ready":"idle").then((function(){return null}))}))}function _(e){return"ready"!==u?Promise.resolve().then((function(){throw new Error("apply() is only allowed in ready status")})):k(e)}function k(e){e=e||{},D();var r=o.map((function(r){return r(e)}));o=void 0;var n=r.map((function(e){return e.error})).filter(Boolean);if(0<n.length)return w("abort").then((function(){throw n[0]}));var t=w("dispose");function c(e){d=d||e}r.forEach((function(e){e.dispose&&e.dispose()}));var d,a=w("apply"),s=[];return r.forEach((function(e){if(e.apply){var r=e.apply(c);if(r)for(var n=0;n<r.length;n++)s.push(r[n])}})),Promise.all([t,a]).then((function(){return d?w("fail").then((function(){throw d})):i?k(e).then((function(e){return s.forEach((function(r){e.indexOf(r)<0&&e.push(r)})),e})):w("idle").then((function(){return s}))}))}function D(){return i&&(o=o||[],Object.keys(g.hmrI).forEach((function(e){i.forEach((function(r){g.hmrI[e](r,o)}))})),i=void 0,1)}function j(e){return new Promise(((r,n)=>{v[e]=r,r=g.p+g.hu(e);var t=new Error;g.l(r,(r=>{var o;v[e]&&(v[e]=void 0,o=r&&("load"===r.type?"missing":r.type),r=r&&r.target&&r.target.src,t.message="Loading hot update chunk "+e+" failed.\n("+o+": "+r+")",t.name="ChunkLoadError",t.type=o,t.request=r,n(t))}))}))}function x(e){function r(e,r){for(var n=0;n<r.length;n++){var t=r[n];-1===e.indexOf(t)&&e.push(t)}}function n(e){console.warn("[HMR] unexpected require("+e.id+") to disposed module")}g.f&&delete g.f.jsonpHmr,l=void 0;var t,o={},i=[],c={};for(t in f)if(g.o(f,t)){var d=f[t],a=d?function(e){for(var n=[e],t={},o=n.map((function(e){return{chain:[e],id:e}}));0<o.length;){var i=o.pop(),c=i.id,d=i.chain,a=g.c[c];if(a&&(!a.hot._selfAccepted||a.hot._selfInvalidated)){if(a.hot._selfDeclined)return{type:"self-declined",chain:d,moduleId:c};if(a.hot._main)return{type:"unaccepted",chain:d,moduleId:c};for(var s=0;s<a.parents.length;s++){var u=a.parents[s],l=g.c[u];if(l){if(l.hot._declinedDependencies[c])return{type:"declined",chain:d.concat([u]),moduleId:c,parentId:u};-1===n.indexOf(u)&&(l.hot._acceptedDependencies[c]?(t[u]||(t[u]=[]),r(t[u],[c])):(delete t[u],n.push(u),o.push({chain:d.concat([u]),id:u})))}}}}return{type:"accepted",moduleId:e,outdatedModules:n,outdatedDependencies:t}}(t):{type:"disposed",moduleId:t},s=!1,u=!1,v=!1,y="";switch(a.chain&&(y="\nUpdate propagation: "+a.chain.join(" -> ")),a.type){case"self-declined":e.onDeclined&&e.onDeclined(a),e.ignoreDeclined||(s=new Error("Aborted because of self decline: "+a.moduleId+y));break;case"declined":e.onDeclined&&e.onDeclined(a),e.ignoreDeclined||(s=new Error("Aborted because of declined dependency: "+a.moduleId+" in "+a.parentId+y));break;case"unaccepted":e.onUnaccepted&&e.onUnaccepted(a),e.ignoreUnaccepted||(s=new Error("Aborted because "+t+" is not accepted"+y));break;case"accepted":e.onAccepted&&e.onAccepted(a),u=!0;break;case"disposed":e.onDisposed&&e.onDisposed(a),v=!0;break;default:throw new Error("Unexception type "+a.type)}if(s)return{error:s};if(u)for(t in c[t]=d,r(i,a.outdatedModules),a.outdatedDependencies)g.o(a.outdatedDependencies,t)&&(o[t]||(o[t]=[]),r(o[t],a.outdatedDependencies[t]));v&&(r(i,[a.moduleId]),c[t]=n)}f=void 0;for(var b,w=[],E=0;E<i.length;E++){var I=i[E],_=g.c[I];_&&(_.hot._selfAccepted||_.hot._main)&&c[I]!==n&&!_.hot._selfInvalidated&&w.push({module:I,require:_.hot._requireSelf,errorHandler:_.hot._selfAccepted})}return{dispose:function(){var e;p.forEach((function(e){delete m[e]})),p=void 0;for(var r,n,t=i.slice();0<t.length;){var c=t.pop(),d=g.c[c];if(d){var a={},s=d.hot._disposeHandlers;for(E=0;E<s.length;E++)s[E].call(null,a);for(g.hmrD[c]=a,d.hot.active=!1,delete g.c[c],delete o[c],E=0;E<d.children.length;E++){var u=g.c[d.children[E]];u&&0<=(e=u.parents.indexOf(c))&&u.parents.splice(e,1)}}}for(n in o)if(g.o(o,n)&&(d=g.c[n]))for(b=o[n],E=0;E<b.length;E++)r=b[E],0<=(e=d.children.indexOf(r))&&d.children.splice(e,1)},apply:function(r){for(var n in c)g.o(c,n)&&(g.m[n]=c[n]);for(var t,d=0;d<h.length;d++)h[d](g);for(t in o)if(g.o(o,t)){var a=g.c[t];if(a){b=o[t];for(var s=[],u=[],l=[],f=0;f<b.length;f++){var p=b[f],m=a.hot._acceptedDependencies[p],v=a.hot._acceptedErrorHandlers[p];m&&-1===s.indexOf(m)&&(s.push(m),u.push(v),l.push(p))}for(var y=0;y<s.length;y++)try{s[y].call(null,b)}catch(d){if("function"==typeof u[y])try{u[y](d,{moduleId:t,dependencyId:l[y]})}catch(n){e.onErrored&&e.onErrored({type:"accept-error-handler-errored",moduleId:t,dependencyId:l[y],error:n,originalError:d}),e.ignoreErrored||(r(n),r(d))}else e.onErrored&&e.onErrored({type:"accept-errored",moduleId:t,dependencyId:l[y],error:d}),e.ignoreErrored||r(d)}}}for(var E=0;E<w.length;E++){var I=w[E],_=I.module;try{I.require(_)}catch(d){if("function"==typeof I.errorHandler)try{I.errorHandler(d,{moduleId:_,module:g.c[_]})}catch(n){e.onErrored&&e.onErrored({type:"self-accept-error-handler-errored",moduleId:_,error:n,originalError:d}),e.ignoreErrored||(r(n),r(d))}else e.onErrored&&e.onErrored({type:"self-accept-errored",moduleId:_,error:d}),e.ignoreErrored||r(d)}}return i}}}return g.m=y,g.c=b,g.i=[],g.hu=e=>e+"."+g.h()+".hot-update.js",g.hmrF=()=>"app."+g.h()+".hot-update.json",g.h=()=>"78b07a1de169fa80a652",g.g=function(){if("object"==typeof globalThis)return globalThis;try{return this||new Function("return this")()}catch(e){if("object"==typeof window)return window}}(),g.o=(e,r)=>Object.prototype.hasOwnProperty.call(e,r),e={},r="DidomIframe:",g.l=(n,t,o,i)=>{if(e[n])e[n].push(t);else{var c,d;if(void 0!==o)for(var a=document.getElementsByTagName("script"),s=0;s<a.length;s++){var u=a[s];if(u.getAttribute("src")==n||u.getAttribute("data-webpack")==r+o){c=u;break}}c||(d=!0,(c=document.createElement("script")).charset="utf-8",c.timeout=120,g.nc&&c.setAttribute("nonce",g.nc),c.setAttribute("data-webpack",r+o),c.src=n),e[n]=[t],t=(r,t)=>{c.onerror=c.onload=null,clearTimeout(l);var o=e[n];if(delete e[n],c.parentNode&&c.parentNode.removeChild(c),o&&o.forEach((e=>e(t))),r)return r(t)};var l=setTimeout(t.bind(null,void 0,{type:"timeout",target:c}),12e4);c.onerror=t.bind(null,c.onerror),c.onload=t.bind(null,c.onload),d&&document.head.appendChild(c)}},d=g.c,a=[],s=[],u="idle",g.hmrD=c={},g.i.push((function(e){var r,l,f,p,h=e.module,m=function(e,r){var o=d[r];if(!o)return e;function i(t){var i;return o.hot.active?(d[t]?-1===(i=d[t].parents).indexOf(r)&&i.push(r):(a=[r],n=t),-1===o.children.indexOf(t)&&o.children.push(t)):(console.warn("[HMR] unexpected require("+t+") from disposed module "+r),a=[]),e(t)}for(var c in e)Object.prototype.hasOwnProperty.call(e,c)&&"e"!==c&&Object.defineProperty(i,c,function(r){return{configurable:!0,enumerable:!0,get:function(){return e[r]},set:function(n){e[r]=n}}}(c));return i.e=function(r){return function(e){switch(u){case"ready":return w("prepare"),t.push(e),E((function(){return w("ready")})),e;case"prepare":return t.push(e),e;default:return e}}(e.e(r))},i}(e.require,e.id);h.hot=(r=e.id,l=h,p={_acceptedDependencies:{},_acceptedErrorHandlers:{},_declinedDependencies:{},_selfAccepted:!1,_selfDeclined:!1,_selfInvalidated:!1,_disposeHandlers:[],_main:f=n!==r,_requireSelf:function(){a=l.parents.slice(),n=f?void 0:r,g(r)},active:!(n=void 0),accept:function(e,r,n){if(void 0===e)p._selfAccepted=!0;else if("function"==typeof e)p._selfAccepted=e;else if("object"==typeof e&&null!==e)for(var t=0;t<e.length;t++)p._acceptedDependencies[e[t]]=r||function(){},p._acceptedErrorHandlers[e[t]]=n;else p._acceptedDependencies[e]=r||function(){},p._acceptedErrorHandlers[e]=n},decline:function(e){if(void 0===e)p._selfDeclined=!0;else if("object"==typeof e&&null!==e)for(var r=0;r<e.length;r++)p._declinedDependencies[e[r]]=!0;else p._declinedDependencies[e]=!0},dispose:function(e){p._disposeHandlers.push(e)},addDisposeHandler:function(e){p._disposeHandlers.push(e)},removeDisposeHandler:function(e){0<=(e=p._disposeHandlers.indexOf(e))&&p._disposeHandlers.splice(e,1)},invalidate:function(){switch(this._selfInvalidated=!0,u){case"idle":o=[],Object.keys(g.hmrI).forEach((function(e){g.hmrI[e](r,o)})),w("ready");break;case"ready":Object.keys(g.hmrI).forEach((function(e){g.hmrI[e](r,o)}));break;case"prepare":case"check":case"dispose":case"apply":(i=i||[]).push(r)}},check:I,apply:_,status:function(e){if(!e)return u;s.push(e)},addStatusHandler:function(e){s.push(e)},removeStatusHandler:function(e){0<=(e=s.indexOf(e))&&s.splice(e,1)},data:c[r]}),h.parents=a,h.children=[],a=[],e.require=m})),g.hmrC={},g.hmrI={},(()=>{var e;g.g.importScripts&&(e=g.g.location+"");var r=g.g.document;if(!e&&r&&((e=r.currentScript?r.currentScript.src:e)||(r=r.getElementsByTagName("script")).length&&(e=r[r.length-1].src)),!e)throw new Error("Automatic publicPath is not supported in this browser");e=e.replace(/#.*$/,"").replace(/\?.*$/,"").replace(/\/[^\/]+$/,"/"),g.p=e})(),m=g.hmrS_jsonp=g.hmrS_jsonp||{143:0},v={},self.webpackHotUpdateDidomIframe=(e,r,n)=>{for(var t in r)g.o(r,t)&&(f[t]=r[t]);n&&h.push(n),v[e]&&(v[e](),v[e]=void 0)},g.hmrI.jsonp=function(e,r){f||(f={},h=[],p=[],r.push(x)),g.o(f,e)||(f[e]=g.m[e])},g.hmrC.jsonp=function(e,r,n,t,o,i){o.push(x),l={},p=r,f=n.reduce((function(e,r){return e[r]=!1,e}),{}),h=[],e.forEach((function(e){g.o(m,e)&&void 0!==m[e]&&(t.push(j(e)),l[e]=!0)})),g.f&&(g.f.jsonpHmr=function(e,r){l&&!g.o(l,e)&&g.o(m,e)&&void 0!==m[e]&&(r.push(j(e)),l[e]=!0)})},g.hmrM=()=>{if("undefined"==typeof fetch)throw new Error("No browser support: need fetch API");return fetch(g.p+g.hmrF()).then((e=>{if(404!==e.status){if(!e.ok)throw new Error("Failed to fetch update manifest "+e.statusText);return e.json()}}))},g(623).default})()}));